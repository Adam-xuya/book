## 附录 E：版本

在第1章中，你看到 `cargo new` 向你的 _Cargo.toml_ 文件添加了一些关于版本的元数据。本附录讨论这意味着什么！

Rust 语言和编译器有六周的发布周期，这意味着用户会持续获得新功能的流。其他编程语言较少发布较大的更改；Rust 更频繁地发布较小的更新。一段时间后，所有这些微小的更改都会累积起来。但从发布到发布，回头看并说“哇，在 Rust 1.10 和 Rust 1.31 之间，Rust 已经改变了很多！”可能很困难。

大约每三年，Rust 团队会发布一个新的 Rust _版本_。每个版本将已发布的功能整合到一个清晰的包中，并包含完全更新的文档和工具。新版本作为常规六周发布过程的一部分发布。

版本对不同的人有不同的目的：

- 对于活跃的 Rust 用户，新版本将增量更改整合到一个易于理解的包中。
- 对于非用户，新版本表明一些重大进展已经实现，这可能使 Rust 值得再次关注。
- 对于开发 Rust 的人，新版本为整个项目提供了一个集结号。

在撰写本文时，有四个 Rust 版本可用：Rust 2015、Rust 2018、Rust 2021 和 Rust 2024。本书使用 Rust 2024 版本惯用法编写。

_Cargo.toml_ 中的 `edition` 键指示编译器应该为你的代码使用哪个版本。如果该键不存在，Rust 出于向后兼容性的原因使用 `2015` 作为版本值。

每个项目可以选择使用默认的 2015 版本之外的版本。版本可以包含不兼容的更改，例如包含一个与代码中的标识符冲突的新关键字。但是，除非你选择加入这些更改，否则即使你升级使用的 Rust 编译器版本，你的代码也将继续编译。

所有 Rust 编译器版本都支持该编译器发布之前存在的任何版本，它们可以将任何受支持版本的 crate 链接在一起。版本更改只影响编译器最初解析代码的方式。因此，如果你使用 Rust 2015，而你的一个依赖项使用 Rust 2018，你的项目将编译并能够使用该依赖项。相反的情况，你的项目使用 Rust 2018 而依赖项使用 Rust 2015，同样有效。

要明确：大多数功能将在所有版本上可用。使用任何 Rust 版本的开发人员将继续看到改进，因为会发布新的稳定版本。但是，在某些情况下，主要是添加新关键字时，一些新功能可能只在较新的版本中可用。如果你想利用这些功能，你需要切换版本。

有关更多详细信息，请参阅[_Rust 版本指南_][edition-guide]。这是一本完整的书，列举了版本之间的差异，并解释了如何通过 `cargo fix` 自动将代码升级到新版本。

[edition-guide]: https://doc.rust-lang.org/stable/edition-guide
