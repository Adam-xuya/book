# 介绍

> 注意：本书版本与 [No Starch Press][nsp] 出版的印刷版和电子书格式的 [Rust 程序设计语言][nsprust] 相同。

[nsprust]: https://nostarch.com/rust-programming-language-3rd-edition
[nsp]: https://nostarch.com/

欢迎阅读 _Rust 程序设计语言_，这是一本关于 Rust 的介绍性书籍。Rust 编程语言帮助您编写更快、更可靠的软件。高级人体工程学和低级控制在编程语言设计中经常存在冲突；Rust 挑战了这种冲突。通过平衡强大的技术能力和出色的开发体验，Rust 让您可以选择控制低级细节（如内存使用），而无需传统上与这种控制相关的所有麻烦。

## Rust 适合谁

Rust 由于各种原因适合许多人。让我们看看几个最重要的群体。

### 开发团队

Rust 被证明是一个高效的工具，用于在具有不同系统编程知识水平的大型开发团队中进行协作。低级代码容易出现各种微妙的错误，在大多数其他语言中，这些错误只能通过有经验的开发人员进行广泛测试和仔细代码审查来捕获。在 Rust 中，编译器扮演守门员的角色，拒绝编译包含这些难以捉摸的错误（包括并发错误）的代码。通过与编译器协作，团队可以花时间专注于程序的逻辑，而不是追查错误。

Rust 还为系统编程世界带来了当代开发工具：

- Cargo，包含的依赖管理器和构建工具，使添加、编译和管理依赖在整个 Rust 生态系统中变得轻松且一致。
- `rustfmt` 格式化工具确保开发人员之间的编码风格一致。
- Rust 语言服务器为集成开发环境（IDE）集成提供支持，用于代码补全和内联错误消息。

通过使用 Rust 生态系统中的这些和其他工具，开发人员可以在编写系统级代码时保持高效。

### 学生

Rust 适合学生和对学习系统概念感兴趣的人。使用 Rust，许多人学习了操作系统开发等主题。社区非常欢迎并乐于回答学生的问题。通过诸如本书这样的努力，Rust 团队希望使系统概念对更多人（特别是编程新手）更容易理解。

### 公司

数百家公司（无论大小）在生产环境中使用 Rust 来完成各种任务，包括命令行工具、Web 服务、DevOps 工具、嵌入式设备、音视频分析和转码、加密货币、生物信息学、搜索引擎、物联网应用、机器学习，甚至 Firefox Web 浏览器的主要部分。

### 开源开发者

Rust 适合想要构建 Rust 编程语言、社区、开发工具和库的人。我们很乐意让您为 Rust 语言做出贡献。

### 重视速度和稳定性的人

Rust 适合在语言中渴望速度和稳定性的人。就速度而言，我们既指 Rust 代码可以运行的速度，也指 Rust 让您编写程序的速度。Rust 编译器的检查通过功能添加和重构确保稳定性。这与没有这些检查的语言中的脆弱遗留代码形成对比，开发人员通常害怕修改这些代码。通过追求零成本抽象——编译为与手动编写的代码一样快的低级代码的高级功能——Rust 努力使安全代码也成为快速代码。

Rust 语言希望支持许多其他用户；这里提到的只是最大的利益相关者中的一些。总的来说，Rust 的最大雄心是通过提供安全性*和*生产力、速度*和*人体工程学来消除程序员几十年来接受的权衡。试试 Rust，看看它的选择是否适合您。

## 本书适合谁

本书假定您已经用另一种编程语言编写过代码，但不做任何关于是哪一种语言的假设。我们试图使材料对来自各种编程背景的人都易于理解。我们不会花太多时间讨论编程*是什么*或如何思考它。如果您完全不懂编程，阅读专门介绍编程的书籍会更好。

## 如何使用本书

总的来说，本书假定您从头到尾按顺序阅读。后面的章节建立在前面章节的概念之上，前面的章节可能不会深入探讨特定主题的细节，但会在后面的章节中重新讨论该主题。

您会在本书中找到两种类型的章节：概念章节和项目章节。在概念章节中，您将学习 Rust 的一个方面。在项目章节中，我们将一起构建小程序，应用您到目前为止所学到的知识。第 2 章、第 12 章和第 21 章是项目章节；其余的是概念章节。

**第 1 章** 解释了如何安装 Rust，如何编写 "Hello, world!" 程序，以及如何使用 Cargo（Rust 的包管理器和构建工具）。**第 2 章** 是通过编写 Rust 程序进行实践介绍，让您构建一个猜数字游戏。在这里，我们以高级别的方式介绍概念，后面的章节将提供更多细节。如果您想立即动手实践，第 2 章就是适合的地方。如果您是一个特别细致的学习者，喜欢在继续之前学习每个细节，您可能想跳过第 2 章，直接进入**第 3 章**，该章涵盖了与其他编程语言类似的 Rust 功能；然后，当您想应用所学的细节进行项目时，可以返回第 2 章。

在**第 4 章**中，您将学习 Rust 的所有权系统。**第 5 章**讨论结构体和方法。**第 6 章**涵盖枚举、`match` 表达式，以及 `if let` 和 `let...else` 控制流结构。您将使用结构体和枚举来创建自定义类型。

在**第 7 章**中，您将学习 Rust 的模块系统以及组织代码及其公共应用程序编程接口（API）的隐私规则。**第 8 章**讨论标准库提供的一些常见集合数据结构：向量、字符串和哈希映射。**第 9 章**探讨 Rust 的错误处理哲学和技术。

**第 10 章**深入探讨泛型、trait 和生命周期，它们使您能够定义适用于多种类型的代码。**第 11 章**全是关于测试的内容，即使有了 Rust 的安全保证，测试也是确保程序逻辑正确所必需的。在**第 12 章**中，我们将构建自己的 `grep` 命令行工具功能子集的实现，该工具在文件中搜索文本。为此，我们将使用前面章节中讨论的许多概念。

**第 13 章**探讨闭包和迭代器：来自函数式编程语言的 Rust 功能。在**第 14 章**中，我们将更深入地研究 Cargo，并讨论与他人共享库的最佳实践。**第 15 章**讨论标准库提供的智能指针以及支持其功能的 trait。

在**第 16 章**中，我们将介绍不同的并发编程模型，并讨论 Rust 如何帮助您无畏地在多个线程中编程。在**第 17 章**中，我们在此基础上探索 Rust 的 async 和 await 语法，以及任务、future 和流，以及它们启用的轻量级并发模型。

**第 18 章**探讨 Rust 惯用法与您可能熟悉的面向对象编程原则的比较。**第 19 章**是关于模式和模式匹配的参考，这是在 Rust 程序中表达想法的强大方式。**第 20 章**包含各种高级主题，包括 unsafe Rust、宏，以及更多关于生命周期、trait、类型、函数和闭包的内容。

在**第 21 章**中，我们将完成一个项目，在该项目中我们将实现一个低级多线程 Web 服务器！

最后，一些附录包含关于该语言的更有参考格式的有用信息。**附录 A** 涵盖 Rust 的关键字，**附录 B** 涵盖 Rust 的运算符和符号，**附录 C** 涵盖标准库提供的可派生 trait，**附录 D** 涵盖一些有用的开发工具，**附录 E** 解释 Rust 版本。在**附录 F**中，您可以找到本书的翻译版本，在**附录 G**中，我们将介绍 Rust 是如何制作的以及 nightly Rust 是什么。

阅读本书没有错误的方式：如果您想跳过前面的内容，请继续！如果您遇到任何困惑，可能必须跳回前面的章节。但请做任何对您有效的事情。

<span id="ferris"></span>

学习 Rust 过程的一个重要部分是学习如何阅读编译器显示的错误消息：这些将指导您编写可工作的代码。因此，我们将提供许多无法编译的示例以及编译器将在每种情况下显示给您的错误消息。要知道，如果您输入并运行随机示例，它可能无法编译！请确保您阅读周围的文本，看看您尝试运行的示例是否应该出错。在大多数情况下，我们将引导您找到任何无法编译的代码的正确版本。Ferris 还将帮助您区分不应该工作的代码：

| Ferris                                                                                                           | 含义                                          |
| ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| <img src="img/ferris/does_not_compile.svg" class="ferris-explain" alt="Ferris with a question mark"/>            | 此代码无法编译！                      |
| <img src="img/ferris/panics.svg" class="ferris-explain" alt="Ferris throwing up their hands"/>                   | 此代码会 panic！                                |
| <img src="img/ferris/not_desired_behavior.svg" class="ferris-explain" alt="Ferris with one claw up, shrugging"/> | 此代码不会产生期望的行为。 |

在大多数情况下，我们将引导您找到任何无法编译的代码的正确版本。

## 源代码

生成本书的源文件可以在 [GitHub][book] 上找到。

[book]: https://github.com/rust-lang/book/tree/main/src
